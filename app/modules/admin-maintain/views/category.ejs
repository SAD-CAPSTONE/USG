 <%- include('../../../templates/admin-navbar.ejs') -%>

 <!-- Content Wrapper. Contains page content -->

<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <h1>

        <small>Note: Please be careful when changing the status of product category, it might affect products in the inventory</small>
      </h1>
      <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li><a href="#">Maintenance</a></li>
        <li class="active">Product Category</li>
      </ol>
    </section>

    <!-- Main content -->
    <section class="content">
		<div class="row">
			<div class="col-md-6">
				<div class="box box-info">
					<div class="box-header with-border">
					  <h3 class="box-title">Product Category</h3>
					</div>
					<!-- /.box-header -->
          &nbsp;&nbsp;<button data-toggle="modal" data-target="#categorymodal" class="large ui green button">Add Category</button>
					<div class="box-body table-responsive">
					  <table id="category" class="table table-bordered table-hover">
            <thead>
  						<tr>
  						  <th style="width: 10px">No</th>
  						  <th>Category</th>
  						  <th>Status</th>
  						  <th style="width: 40px">Actions</th>
  						</tr>
          </thead>
          <tbody>
            <% if (category == null || category == undefined || category.length == 0){ %>

            <% }else{ %>
            <%  category.forEach(function(i){ %>
                <tr>
                  <td><%=i.intCategoryNo%></td>
                  <td><%=i.strCategory%></td>
                  <td>
                    <% if (i.intStatus == 1) { %>
                      <button data-no="<%=i.intCategoryNo%>" class="ui toggle button active inactivate_category">Active</button>

                    <% }else{ %>
                      <button data-no="<%=i.intCategoryNo%>" class="ui toggle button inactive activate_category">Inactive</button>
                    <% } %>
                  </td>
                  <td><button class="btn btn-default btn-sm">Edit</button></td>
                </tr>
              <% }) %>
            <% } %>
          </tbody>


					  </table>
					</div>
					<!-- /.box-body -->

				</div>
				<!-- /.box -->
			</div>

			<div class="col-md-6">
				<div class="box box-info">
					<div class="box-header with-border">
					  <h3 class="box-title">Product Sub-Category</h3>
					</div>
					<!-- /.box-header -->
          &nbsp;&nbsp;<button data-toggle="modal" data-target="#subcategorymodal" class="large ui green button">Add Sub-Category</button>
					<div class="box-body table-responsive">
					  <table id="subCategory" class="table table-bordered table-hover">
              <thead>
              <tr>
  						  <th style="width: 10px">No</th>
  						  <th>Category - SubCategory</th>
  						  <th>Status</th>
  						  <th style="width: 40px">Actions</th>
  						</tr>
            </thead>
            <tbody>
              <% if (sub == null || sub == undefined || sub.length == 0){ %>

              <% }else{ %>
              <%  sub.forEach(function(i){ %>
                  <tr>
                    <td><%=i.intSubCategoryNo%></td>
                    <td><%=i.strCategory%> - <%=i.strSubCategory%></td>
                    <td>
                      <% if (i.S == 1) { %>
                        <button data-no="<%=i.intSubCategoryNo%>" class="ui toggle button active inactivate_subcategory">Active</button>
                      <% }else{ %>
                        <button data-no="<%=i.intSubCategoryNo%>" class="ui toggle button inactive activate_subcategory">Inactive</button>
                      <% } %>
                    </td>
                    <td><button class="btn btn-default btn-sm">Edit</button></td>
                  </tr>
              <%  }) %>
            <%  } %>
  					</tbody>

					  </table>
					</div>
					<!-- /.box-body -->
				</div>
				<!-- /.box -->

			</div>

		</div> <!-- row end -->

	</section>

</div>

  <!-- /.content-wrapper -->

  <!-- Modals -->

	<div class="modal fade" id="categorymodal">
	  <div class="modal-dialog">
		<div class="modal-content">
		  <div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-label="Close">
			  <span aria-hidden="true">&times;</span></button>
			<h4 class="modal-title">Category</h4>
		  </div>
		  <div class="modal-body">
			<!-- Horizontal Form -->

					<!-- form start -->
          <form role="form" method="post" action="/maintenance/addCategory">
              <div class="box-body">
                <div class="form-group">
                  <label for="category">Product Category:</label>
                  <input type="text" required class="form-control" name="category" id="category" placeholder="ex. Food">
                </div>

              </div>


		  </div>
		  <div class="modal-footer">
			<button type="button" class="large ui button" data-dismiss="modal">Close</button>
			<button type="submit" class="large ui teal button">Save</button>
		  </div>
      </form>
		</div>
		<!-- /.modal-content -->
	</div>
  <!-- /.modal-dialog -->
</div>


	<div class="modal fade" id="subcategorymodal">
	  <div class="modal-dialog">
		<div class="modal-content">
		  <div class="modal-header">
			<button type="button" class="close" data-dismiss="modal" aria-label="Close">
			  <span aria-hidden="true">&times;</span></button>
			<h4 class="modal-title">SubCategory</h4>
		  </div>
		  <div class="modal-body">
			<!-- Horizontal Form -->

					<!-- form start -->
          <form role="form" method="post" action="/maintenance/addSubCategory">
              <div class="box-body">
                <div class="form-group">
                  <label for="categories">Choose Category here:</label>
                  <select class="form-control" name="categ">
                    <% if (category == undefined || category == null || category.length == 0){ %>

                    <%}else{ %>
                    <%  category.forEach(function(i){ %>
                        <option value="<%=i.intCategoryNo%>"><%=i.strCategory%></option>
                    <%  }) %>
                    <% } %>
                  </select>
                  <label for="subcategory">Sub Category:</label>
                  <input type="text" required class="form-control" name="subcategory" id="subcategory" placeholder="">
                </div>

              </div>


		  </div>
		  <div class="modal-footer">
			<button type="button" class="large ui button" data-dismiss="modal">Close</button>
			<button type="submit" class="large ui teal button">Save</button>
		  </div>
      </form>
		</div>
		<!-- /.modal-content -->
	</div>
  <!-- /.modal-dialog -->
</div>

  <!-- Main Footer -->
  <footer class="main-footer">
    <!-- To the right -->
    <div class="pull-right hidden-xs">
      Anything you want
    </div>
    <!-- Default to the left -->
    <strong>Copyright &copy; 2016 <a href="#">Company</a>.</strong> All rights reserved.
  </footer>

  <!-- Control Sidebar -->
  <aside class="control-sidebar control-sidebar-dark">
    <!-- Create the tabs -->
    <ul class="nav nav-tabs nav-justified control-sidebar-tabs">
      <li class="active"><a href="#control-sidebar-home-tab" data-toggle="tab"><i class="fa fa-home"></i></a></li>
      <li><a href="#control-sidebar-settings-tab" data-toggle="tab"><i class="fa fa-gears"></i></a></li>
    </ul>
    <!-- Tab panes -->
    <div class="tab-content">
      <!-- Home tab content -->
      <div class="tab-pane active" id="control-sidebar-home-tab">
        <h3 class="control-sidebar-heading">Recent Activity</h3>
        <ul class="control-sidebar-menu">
          <li>
            <a href="javascript:;">
              <i class="menu-icon fa fa-birthday-cake bg-red"></i>

              <div class="menu-info">
                <h4 class="control-sidebar-subheading">Langdon's Birthday</h4>

                <p>Will be 23 on April 24th</p>
              </div>
            </a>
          </li>
        </ul>
        <!-- /.control-sidebar-menu -->

        <h3 class="control-sidebar-heading">Tasks Progress</h3>
        <ul class="control-sidebar-menu">
          <li>
            <a href="javascript:;">
              <h4 class="control-sidebar-subheading">
                Custom Template Design
                <span class="pull-right-container">
                    <span class="label label-danger pull-right">70%</span>
                  </span>
              </h4>

              <div class="progress progress-xxs">
                <div class="progress-bar progress-bar-danger" style="width: 70%"></div>
              </div>
            </a>
          </li>
        </ul>
        <!-- /.control-sidebar-menu -->

      </div>
      <!-- /.tab-pane -->
      <!-- Stats tab content -->
      <div class="tab-pane" id="control-sidebar-stats-tab">Stats Tab Content</div>
      <!-- /.tab-pane -->
      <!-- Settings tab content -->
      <div class="tab-pane" id="control-sidebar-settings-tab">
        <form method="post">
          <h3 class="control-sidebar-heading">General Settings</h3>

          <div class="form-group">
            <label class="control-sidebar-subheading">
              Report panel usage
              <input type="checkbox" class="pull-right" checked>
            </label>

            <p>
              Some information about this general settings option
            </p>
          </div>
          <!-- /.form-group -->
        </form>
      </div>
      <!-- /.tab-pane -->
    </div>
  </aside>
  <!-- /.control-sidebar -->
  <!-- Add the sidebar's background. This div must be placed
  immediately after the control sidebar -->
  <div class="control-sidebar-bg"></div>
</div>
<!-- ./wrapper -->

<!-- REQUIRED JS SCRIPTS -->

<%- include('../../../templates/admin-footer.ejs') -%>

<!-- page script (new added) -->

<script>
  $(function () {
    $('#category').DataTable({
      'paging'      : true,
      'lengthChange': true,
      'searching'   : true,
      'ordering'    : true,
      'info'        : true,
      'autoWidth'   : true,
	  'select'		: true,
	  'scroll'		: true
    })
  })
</script>

<script>
  $(function () {
    $('#subCategory').DataTable({
      'paging'      : true,
      'lengthChange': true,
      'searching'   : true,
      'ordering'    : true,
      'info'        : true,
      'autoWidth'   : true,
	  'select'		: true,
	  'scroll'		: true
    })
  })
</script>

<script>
$('#title').html("USG | Product Category");
$(".treeview a:contains('Maintenance')").parent().addClass("active");
$(".navi a:contains('Product Category')").parent().addClass("active");
</script>

<script>
  $('.activate_category').on('click',function(){
    $(this).removeClass("ui toggle button activate_category").addClass("ui toggle button active inactivate_category").html("Active");

    $.ajax({
      url: '/maintenance/activateCategory',
      method: 'post',
      datatype: 'json',
      data: {no: $(this).data('no')},
      success: function(response,status,http){
        if (response){
          swal("Success!", "You have activated category no"+$(this).data('no'), "success");
        }
      }
    })
  })

  $('.inactivate_category').on('click',function(){
    $(this).removeClass("ui toggle button active inactivate_category").addClass("ui toggle button  activate_category").html("Inactive");

    $.ajax({
      url: '/maintenance/inactivateCategory',
      method: 'post',
      datatype: 'json',
      data: {no: $(this).data('no')},
      success: function(response,status,http){
        if (response){
          swal("Success!", "You have activated category no"+$(this).data('no'), "success");
        }
      }
    })
  })

  $('.inactivate_subcategory').on('click',function(){
    $(this).removeClass("ui toggle button active inactivate_subcategory").addClass("ui toggle button  activate_subcategory").html("Inactive");

    $.ajax({
      url: '/maintenance/inactivateSubCategory',
      method: 'post',
      datatype: 'json',
      data: {no: $(this).data('no')},
      success: function(response,status,http){
        if (response){
          swal("Success!", "You have activated SubCategory no"+$(this).data('no'), "success");
        }
      }
    })
  })

  $('.activate_subcategory').on('click',function(){
    $(this).removeClass("ui toggle button activate_subcategory").addClass("ui toggle button active inactivate_subcategory").html("Active");

    $.ajax({
      url: '/maintenance/activateSubCategory',
      method: 'post',
      datatype: 'json',
      data: {no: $(this).data('no')},
      success: function(response,status,http){
        if (response){
          swal("Success!", "You have activated SubCategory no"+$(this).data('no'), "success");
        }
      }
    })
  })

</script>


<!-- Optionally, you can add Slimscroll and FastClick plugins.
     Both of these plugins are recommended to enhance the
     user experience. -->
</body>
</html>
