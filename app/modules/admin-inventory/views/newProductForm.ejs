<%- include('../../../templates/admin-navbar.ejs') -%>


<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <section class="content-header">
    <h1>
      Stocks
      <small></small>

    </h1>
    <ol class="breadcrumb">
      <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
      <li><a href="#">Maintenance</a></li>
      <li class="active">Inventory</li>
    </ol>
  </section>

  <!-- Main content -->
  <section class="content">


    <div class="row">
      <div class="col-xs-12">
        <div class="nav-tabs-custom">
          <ul class="nav nav-tabs">
            <li class="active"><a href="#addInventory" data-toggle="tab"><i class="fa fa-plus"></i> Add to Stock</a></li>

          </ul>
          <div class="tab-content">

          <form id="productForm" method="/inventory/addProductNewForm" enctype="multipart/form-data" action="post">
            <!-- New product Item-->
            <div class="tab-pane active" id="addInventory">
              <div class="row">
                <!-- Picture Section -->
                <div class="col-sm-4">
                  <img onclick="click_input()" src="/customer-assets/images/static/blank.png" class="img-responsive" disabled id="add_img"   >
                  <br>
                  <div class="form-group">
                      <label for="view_pic">Product Picture</label>
                      <input  type="file" class="form-control" id="add_pic" name="pic" required placeholder="">
                  </div>
                  <div class="form-group">
                      <label for="notify">
                      <input type="checkbox" name="active" checked id="active" class="flat-red">
                        &nbsp; Active
                      </label>
                  </div>
                </div>
           
                <!-- Form Section -->
                <div class="col-sm-8">
                  <div class="form-group">
                    <label for="view_pcode">Product Code</label>
                    <input type="text" class="form-control" required id="add_pcode" name="code">
                  </div>
                  <div class="form-group">
                    <label for="view_pname">Product Name</label>
                    <input type="text" class="form-control" required id="add_pname" name="name"  >
                  </div>
                  <div class="form-group">
                    <label for="view_brand">Brand</label>
                    <select class="form-control" required id="add_brand" name="brand" >
                      <% if(brand==null||brand==undefined){ %>

                      <% }else if(brand.length==0){ %>

                      <% }else{ %>
                      <%  brand.forEach(function(i){ %>
                          <option value="<%=i.intBrandNo%>"><%=i.strBrand%></option> 
                      <%  }) %>
                      <% } %>

                    </select>
                  </div>
                  <div class="form-group">
                      <label for="view_pdesc">Product Description</label>
                      <textarea class="form-control" required id="add_pdesc" name="desc"></textarea>
                  </div>
                  <div class="form-group">
                      <label for="view_pcat">Category</label>
                      <select class="form-control" id="add_pcat" required name="category" >
                        <% if(category==null||category==undefined){ %>

                        <% }else if(category.length==0){ %>
    
                          <% }else{ %>
                          <%  category.forEach(function(i){ %>
                              <option value="<%=i.intSubCategoryNo%>"><%=i.strCategory%>-<%=i.strSubCategory%></option> 
                        <%  }) %>
                        <% } %>
    
                      </select>
                  </div>

 

                </div>
              </div>
       
              <center><button data-toggle="modal" data-target="#addVariant" class="large ui green button" ><i class="fa fa-plus"></i> Add Product Variant</button></center>
              <div class="row">
                <div class="col-sm-12">
                  <div class="box-body table-responsive">
                    <table id="variantTable" class="table table-bordered table-hover ">
                      <thead class="bg-success">
                       <tr>
                         <th></th>
                         <th>Barcode</th>
                         <th>Supplier</th>
                         <th>Variant</th>
                         <th>Size</th>
                         <th>SRP</th>
                         <th>Product Price</th>
                         <th>Shelf</th>
                         <th>Critical Limit</th>
                       </tr>
                      </thead>
                      <tbody>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>

            
            
          </form>



          </div>
          <!-- /.tab-content -->
        </div>
        <!-- /.nav-tabs-custom -->
      </div>
      <!-- /.col -->
    </div>
    <!-- /.row -->
  </section>
  <!-- /.content -->
</div>
<!-- /.content-wrapper -->


<!-- Modals -->

<div class="modal fade" id="addVariant">
  <div class="modal-dialog" style="width:800px;">
  	<div class="modal-content">
  	  <div class="modal-header">
  		<button type="button" class="close" data-dismiss="modal" aria-label="Close">
  		  <span aria-hidden="true">&times;</span></button>
  		<h4 class="modal-title"></h4>
  	  </div>
      <form>
    	  <div class="modal-body">
          <div class="form-group">
            <label >Scan Barcode</label>
            <input type="text" class="form-control" required id="add_barcode" name="add_pcode">
          </div>
          <div class="form-group">
            <label >Supplier</label>
            <input type="text" class="form-control" required id="add_supplier" name="add_pcode">
          </div>
          <div class="form-group">
            <label >Variant Description</label>
            <input type="text" class="form-control" required id="add_description" name="add_pcode">
          </div>
          <div class="form-group">
            <label >Product SRP</label>
            <input type="text" class="form-control" required id="add_srp" name="add_pcode">
          </div>
          <div class="form-group">
            <label >Product Price</label>
            <input type="text" class="form-control" required id="add_price" name="add_pcode">
          </div>
          <div class="form-group">
            <label >Size</label>
            <input type="text" class="form-control" required id="add_size" name="add_pcode">
          </div>
          <div class="form-group">
            <label >UOM</label>
            <select>
              <% if(uom==null||uom==undefined){ %>

                <% }else if(uom.length==0){ %>

                <% }else{ %>
                <%  uom.forEach(function(i){ %>
                    <option value="<%=i.intUomNo%>"><%=i.strUnitName%></option> 
                <%  }) %>
                <% } %>

            </select>
          </div>
          <div class="form-group">
            <label >Shelf No</label>
            <input type="text" class="form-control" required id="add_shelf" name="add_pcode">
          </div>
          <div class="form-group">
            <label >Critical Limit</label>
            <input type="text" class="form-control" required id="add_critical" name="add_pcode">
          </div>
        </div>

        <div class="modal-footer">
          <button type="reset" id="btn_reset" class="large ui button">Clear Fields</button>
          <button type="button" data-dismiss="modal" id="btn_addToList" class="large ui teal button">Add</button>
        </div>
      </form>
    </div>
  </div>
</div>




<%- include('../../../templates/admin-aside.ejs') -%>

<!-- ./wrapper -->

<!-- REQUIRED JS SCRIPTS -->

<%- include('../../../templates/admin-footer.ejs') -%>

<!-- Moment -->
<script src="/assets/admin/bower_components/moment/min/moment.min.js"></script>
<!-- Date range picker -->
<script src="/assets/admin/bower_components/bootstrap-daterangepicker/daterangepicker.js"></script>


  <!-- page script (new added) -->

  <script>
    $(function () {
      $('#variantTable').DataTable({
        'paging'      : false,
        'lengthChange': false,
        'searching'   : false,
        'ordering'    : false,
        'info'        : false,
        'autoWidth'   : true
      })
    })
  </script>

  <script>
    $('#btn_addToList').on('click',function(){
      var t = $('#variantTable').DataTable();

      t.row.add( [
          `<button type="button" class="remove small ui red circular button">X</button>`,
          `<input type="hidden" class=""  value="${$('#add_barcode').val()}" name="barcode">${$('#add_barcode').val()}`,
          `<input type="hidden" class=""  value="${$('#add_supplier').val()}" name="supplier">${$('#add_supplier').val()}`,
          `<input type="hidden" class=""  value="${$('#add_variant').val()}" name="variant">`,
          `<input type="hidden" class=""  value="${$('#add_size').val()}" name="size">`,
          `<input type="hidden" class=""  value="${$('#add_uom').val()}" name="uom">`,
          `<input type="hidden" class=""  value="${$('#add_srp').val()}" name="srp">`,
          `<input type="hidden" class=""  value="${$('#add_price').val()}" name="price">`,
          ``

      ] ).draw( false );

      $('.remove').on('click',function(){
          $(this).closest('tr').find('input').each(function(){
            $(this).removeAttr('class')
          })
          $(this).closest('tr').remove();


      })

      $('#btn_reset').click();

    })


 
  </script>


<script>
  $('#title').html("USG | Stocks");

  $(".navi a:contains('Stocks')").parent().addClass("active");

</script>

</body>
</html>
